(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){e.exports={cartContainer:"CartItems_cartContainer__1d5P3",items:"CartItems_items__2bGSL",itemInfo:"CartItems_itemInfo__DQ6uN",itemAction:"CartItems_itemAction__1kZEm",itemAmount:"CartItems_itemAmount__aMP-2",itemButtons:"CartItems_itemButtons__2G3il",total:"CartItems_total__3dVAG",actions:"CartItems_actions__29KT2",orderBtn:"CartItems_orderBtn__1Cofp",closeBtn:"CartItems_closeBtn__3LPiD"}},function(e,t,n){e.exports={orderContainer:"OrderForm_orderContainer__3BOov",formFirst:"OrderForm_formFirst__2LYk1",formItem:"OrderForm_formItem__1Zs2O",actions:"OrderForm_actions__1FqEn",confirmBtn:"OrderForm_confirmBtn__1ieMg",cancelBtn:"OrderForm_cancelBtn__1fev4",invalid:"OrderForm_invalid__3_I3a",message:"OrderForm_message__1bpoZ"}},,,,,,,,,,function(e,t,n){e.exports={loggedInContainer:"LoggedIn_loggedInContainer__1oUq8",seperator:"LoggedIn_seperator__2euty",logBtn:"LoggedIn_logBtn__2KJAF"}},,function(e,t,n){e.exports={meals:"AvailableMeals_meals__2ZLCP",menuLoading:"AvailableMeals_menuLoading__232-r",error:"AvailableMeals_error__3LgjX"}},,function(e,t,n){e.exports={backdrop:"Modal_backdrop__1mfF6",modal:"Modal_modal__4DXUe","slide-down":"Modal_slide-down__W3MdX"}},function(e,t,n){e.exports={confirmed:"Cart_confirmed__1hosy",ok:"Cart_ok__9136d"}},function(e,t,n){e.exports={headerContainer:"Header_headerContainer__3QFbP",loggedInContainer:"Header_loggedInContainer___7DBe",logBtn:"Header_logBtn__130R3"}},function(e,t,n){e.exports={button:"CartButton_button__2ZiwO",bump:"CartButton_bump__jmTeY"}},function(e,t,n){e.exports={infoContainer:"InfoMassage_infoContainer__3Nv-z",info:"InfoMassage_info__2e6HC"}},function(e,t,n){e.exports={form:"MealItemForm_form__32qVd",amount:"MealItemForm_amount__OVT7f"}},function(e,t,n){e.exports={container:"MealItem_container__3Iy5Q",info:"MealItem_info__2Wuqi"}},function(e,t,n){e.exports={card:"Card_card__1m44e"}},,,,,,,function(e,t,n){},,,,function(e,t,n){"use strict";n.r(t);var a=n(24),r=n.n(a),c=(n(44),n(8)),o=n(7),s=n(13),i=n(30),u=n.n(i),d=n(3),l=document.getElementById("overlays");var m=function(e){return Object(d.jsxs)(o.Fragment,{children:[Object(a.createPortal)(Object(d.jsx)("div",{className:u.a.backdrop,onClick:e.onClose}),l),Object(a.createPortal)(Object(d.jsx)("div",{className:u.a.modal,children:e.children}),l)]})},j=n(20),b=Object(o.createContext)({items:[],totalAmount:0,addItem:function(e){},removeItem:function(e){},clear:function(){},replace:function(e){}}),f=n(15),p=n.n(f);var O=function(e){var t=Object(o.useContext)(b),n="$".concat(t.totalAmount.toFixed(2)),a=t.items.length>0;function r(e){t.removeItem(e)}function c(e){t.addItem(Object(j.a)(Object(j.a)({},e),{},{amount:1}))}var s=t.items.map((function(e){return Object(d.jsxs)("li",{children:[Object(d.jsxs)("div",{className:p.a.itemInfo,children:[Object(d.jsx)("span",{children:e.name}),Object(d.jsx)("small",{children:"$".concat(e.price.toFixed(2))})]}),Object(d.jsxs)("div",{className:p.a.itemAction,children:[Object(d.jsxs)("div",{className:p.a.itemAmount,children:["x",e.amount]}),Object(d.jsxs)("div",{className:p.a.itemButtons,children:[Object(d.jsx)("button",{onClick:r.bind(null,e.id),children:"-"}),Object(d.jsx)("button",{onClick:c.bind(null,e),children:"+"})]})]})]},e.id)}));return Object(d.jsxs)("div",{className:p.a.cartContainer,children:[Object(d.jsx)("ul",{className:p.a.items,children:s}),Object(d.jsxs)("div",{className:p.a.total,children:[Object(d.jsx)("span",{children:"Total Amount"}),Object(d.jsx)("span",{children:n})]}),Object(d.jsxs)("div",{className:p.a.actions,children:[Object(d.jsx)("button",{className:p.a.closeBtn,onClick:e.onHideCart,children:"Close"}),a&&Object(d.jsx)("button",{className:p.a.orderBtn,onClick:e.onOrder,children:"Order"})]})]})},h=n(16),x=n.n(h);var _=function(e){var t=Object(o.useState)(!1),n=Object(c.a)(t,2),a=n[0],r=n[1],s=Object(o.useState)(!1),i=Object(c.a)(s,2),u=i[0],l=i[1],m=Object(o.useRef)(),j=Object(o.useRef)(),b=Object(o.useRef)(),f=!a&&u?"".concat(x.a.formItem," ").concat(x.a.invalid):"".concat(x.a.formItem);return Object(d.jsxs)("form",{className:x.a.orderContainer,onSubmit:function(t){t.preventDefault(),l(!0),""!==m.current.value&&""!==j.current.value&&""!==b.current.value?(r(!0),e.onConfirm({name:m.current.value,city:j.current.value,address:b.current.value})):r(!1)},children:[Object(d.jsxs)("div",{className:x.a.formFirst,children:[Object(d.jsxs)("div",{className:f,children:[Object(d.jsx)("label",{htmlFor:"name",children:"Name"}),Object(d.jsx)("input",{type:"text",id:"name",ref:m})]}),Object(d.jsxs)("div",{className:f,children:[Object(d.jsx)("label",{htmlFor:"city",children:"City"}),Object(d.jsx)("input",{type:"text",id:"city",ref:j})]})]}),Object(d.jsxs)("div",{className:f,children:[Object(d.jsx)("label",{htmlFor:"address",children:"Address"}),Object(d.jsx)("input",{type:"text",id:"address",ref:b})]}),!a&&u&&Object(d.jsx)("p",{className:x.a.message,children:"Please fill all fields!"}),Object(d.jsxs)("div",{className:x.a.actions,children:[Object(d.jsx)("button",{className:x.a.cancelBtn,onClick:e.onCancel,children:"Cancel"}),Object(d.jsx)("button",{className:x.a.confirmBtn,type:"submit",children:"Confirm"})]})]})},v=n(31),C=n.n(v);var g=function(e){var t=Object(o.useState)(!1),n=Object(c.a)(t,2),a=n[0],r=n[1],i=Object(o.useState)(!1),u=Object(c.a)(i,2),l=u[0],j=u[1],f=Object(o.useContext)(b);return Object(d.jsxs)(m,{onClose:e.onHideCart,children:[!a&&!l&&Object(d.jsx)(O,{onHideCart:e.onHideCart,onOrder:function(){r(!0)}}),a&&!l&&Object(d.jsx)(_,{onCancel:function(){r(!1)},onConfirm:function(e){var t={name:e.name,city:e.city,address:e.address,order:Object(s.a)(f.items)};fetch("https://food-app-8e47b-default-rtdb.europe-west1.firebasedatabase.app/orders.json",{method:"POST",body:JSON.stringify(t),type:"cors"}).then((function(e){f.clear(),j(!0)}))}}),a&&l&&Object(d.jsxs)("div",{className:C.a.confirmed,children:[Object(d.jsx)("p",{children:"Order confirmed, thank you for your order!"}),Object(d.jsx)("button",{onClick:e.onHideCart,className:C.a.ok,children:"Ok"})]})]})},I=n(32),y=n.n(I),N=Object(o.createContext)({user:null,login:function(){},logout:function(){}}),k=n(33),A=n.n(k),w=0;var B=function(e){var t=Object(o.useState)(!1),n=Object(c.a)(t,2),a=n[0],r=n[1],s=Object(o.useContext)(b),i=Object(o.useContext)(N),u=s.items.reduce((function(e,t){return e+t.amount}),0),l="".concat(A.a.button," ").concat(a?A.a.bump:"");return Object(o.useEffect)((function(){if(0!==s.items.length){r(!0);var e=setTimeout((function(){r(!1)}),300);return function(){clearTimeout(e)}}}),[s.items]),Object(o.useEffect)((function(){i.user&&w>1&&fetch("https://food-app-8e47b-default-rtdb.europe-west1.firebasedatabase.app/carts/".concat(i.user.uid,".json"),{method:"PUT",body:JSON.stringify(s.items),type:"cors"})}),[s.items,i.user,u]),w++,Object(d.jsxs)("button",{className:l,onClick:e.onClick,children:[Object(d.jsx)("span",{className:"material-icons",children:"shopping_cart"}),Object(d.jsx)("h2",{children:"Cart"}),Object(d.jsx)("small",{children:u})]})},F=n(26),E=n.n(F);var S=function(e){return Object(d.jsxs)("div",{className:E.a.loggedInContainer,children:[Object(d.jsx)("div",{className:E.a.userInfo,children:e.userDisplay}),Object(d.jsx)("div",{className:E.a.seperator}),Object(d.jsx)(B,{onClick:e.onShowCart}),Object(d.jsx)("button",{className:E.a.logBtn,onClick:e.onLogout,children:"Logout"})]})},L=0;var M=function(e){var t=Object(o.useContext)(N),n=Object(o.useContext)(b),a=t.user;return Object(o.useEffect)((function(){a&&L<3&&fetch("https://food-app-8e47b-default-rtdb.europe-west1.firebasedatabase.app/carts/".concat(a.uid,".json")).then((function(e){e.json().then((function(e){e&&e.forEach((function(e){n.addItem(e)}))}))}))}),[a,n]),L++,Object(d.jsxs)("div",{className:y.a.headerContainer,children:[Object(d.jsx)("h1",{children:"Turgut Pizzaria"}),!a&&Object(d.jsx)("button",{className:y.a.logBtn,onClick:function(){t.login()},children:"Login"}),a&&Object(d.jsx)(S,{onLogout:function(){t.logout()},userDisplay:a.displayName,onShowCart:e.onShowCart})]})},P=n(34),R=n.n(P);var D=function(){return Object(d.jsx)("div",{className:R.a.infoContainer,children:Object(d.jsx)("p",{className:R.a.info,children:"Order now to try our delicious pizzas!"})})},T=n(0),H=n.n(T),z=n(2),V=n(37),q=n.n(V);var Z=function(e){return Object(d.jsx)("div",{className:q.a.card,children:e.children})},J=n(35),X=n.n(J);var G=function(e){var t=Object(o.useState)(!0),n=Object(c.a)(t,2),a=n[0],r=n[1],s=Object(o.useRef)();return Object(d.jsxs)("form",{className:X.a.form,onSubmit:function(t){t.preventDefault();var n=+s.current.value;n<1?r(!1):e.onAddToCart(n)},children:[Object(d.jsxs)("div",{className:X.a.amount,children:[Object(d.jsx)("label",{htmlFor:e.id,children:"Amount"}),Object(d.jsx)("input",{ref:s,type:"number",id:e.id,min:"1",max:"9",step:"1",defaultValue:"1"})]}),Object(d.jsx)("button",{children:"+"}),!a&&Object(d.jsx)("p",{children:"Please enter a valid amount!"})]})},K=n(36),U=n.n(K);var Q=function(e){var t=Object(o.useContext)(b),n=Object(o.useContext)(N),a="$".concat(e.price.toFixed(2));return Object(d.jsxs)("li",{className:U.a.container,children:[Object(d.jsxs)("div",{className:U.a.info,children:[Object(d.jsx)("h3",{children:e.name}),Object(d.jsx)("p",{children:e.description}),Object(d.jsx)("div",{children:a})]}),Object(d.jsx)(G,{id:e.id,onAddToCart:function(a){n.user&&t.addItem({id:e.id,name:e.name,amount:a,price:e.price})}})]})},$=n(28),W=n.n($);var Y=function(){var e=Object(o.useState)([]),t=Object(c.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)(!0),s=Object(c.a)(r,2),i=s[0],u=s[1],l=Object(o.useState)(""),m=Object(c.a)(l,2),j=m[0],b=m[1];Object(o.useEffect)((function(){function e(){return(e=Object(z.a)(H.a.mark((function e(){var t,n,r,c;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://food-app-8e47b-default-rtdb.europe-west1.firebasedatabase.app/meals.json");case 2:return t=e.sent,e.next=5,t.json();case 5:for(c in n=e.sent,r=[],n)r.push({id:c,name:n[c].name,description:n[c].description,price:n[c].price});a(r),u(!1);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){throw b("Error! Could not fetch menu, details: ".concat(e)),new Error("Error! Could not fetch menu, details: ".concat(e))}))}),[]);var f=n.map((function(e){return Object(d.jsx)(Q,{id:e.id,name:e.name,description:e.description,price:e.price},e.id)})),p="";return i&&(p=Object(d.jsx)("p",{className:W.a.menuLoading,children:"Menu Loading..."})),i||""===j||(p=Object(d.jsx)("p",{className:W.a.error,children:j})),i||""!==j||(p=Object(d.jsxs)(Z,{children:[Object(d.jsx)("h2",{children:"Menu"}),Object(d.jsx)("ul",{children:f})]})),Object(d.jsx)("div",{className:W.a.meals,children:p})},ee={items:[],totalAmount:0};function te(e,t){if("ADD"===t.type){var n,a=e.totalAmount+t.item.price*t.item.amount,r=e.items.findIndex((function(e){return e.id===t.item.id})),c=e.items[r];if(c){var o=Object(j.a)(Object(j.a)({},c),{},{amount:c.amount+t.item.amount});(n=Object(s.a)(e.items))[r]=o}else n=e.items.concat(t.item);return{items:n,totalAmount:a}}if("REMOVE"===t.type){var i,u=e.items.findIndex((function(e){return e.id===t.id})),d=e.items[u],l=e.totalAmount-d.price;if(1===d.amount)i=e.items.filter((function(e){return e.id!==t.id}));else{var m=Object(j.a)(Object(j.a)({},d),{},{amount:d.amount-1});(i=Object(s.a)(e.items))[u]=m}return{items:i,totalAmount:l}}return"CLEAR"===t.type?ee:"REPLACE"===t.type?{items:t.cart.items,totalAmount:t.cart.totalAmount}:ee}var ne=function(e){var t=Object(o.useReducer)(te,ee),n=Object(c.a)(t,2),a=n[0],r=n[1],s={items:a.items,totalAmount:a.totalAmount,addItem:function(e){r({type:"ADD",item:e})},removeItem:function(e){r({type:"REMOVE",id:e})},clear:function(){r({type:"CLEAR"})},replace:function(e){r({type:"REPLACE",cart:e})}};return Object(d.jsx)(b.Provider,{value:s,children:e.children})},ae=n(38),re=n(21),ce=Object(ae.a)({apiKey:"AIzaSyCttiGqc8V7g8RC0ZVHuqfcO-NXK2_OX6g",authDomain:"food-app-8e47b.firebaseapp.com",databaseURL:"https://food-app-8e47b-default-rtdb.europe-west1.firebasedatabase.app",projectId:"food-app-8e47b",storageBucket:"food-app-8e47b.appspot.com",messagingSenderId:"819035052152",appId:"1:819035052152:web:b22e92dac20cbefea5358d"}),oe=new re.a,se=Object(re.b)(ce);function ie(){return ue.apply(this,arguments)}function ue(){return(ue=Object(z.a)(H.a.mark((function e(){var t,n,a,r,c,o,s,i;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(re.d)(se,oe);case 3:return t=e.sent,n=re.a.credentialFromResult(t),a=n.accessToken,r=t.user,e.abrupt("return",{credential:n,token:a,user:r});case 10:return e.prev=10,e.t0=e.catch(0),c=e.t0.code,o=e.t0.message,s=e.t0.email,i=re.a.credentialFromError(e.t0),e.abrupt("return",{errorCode:c,errorMessage:o,email:s,credential:i});case 17:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function de(){return le.apply(this,arguments)}function le(){return(le=Object(z.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(re.e)(se);case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var me=function(e){var t,n=Object(o.useState)(null),a=Object(c.a)(n,2),r=a[0],s=a[1];function i(){return(i=Object(z.a)(H.a.mark((function e(){var t,n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:t=e.sent,n=t.user,s(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(z.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de();case 2:s(null);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t=function(e){s(e||null)},Object(re.c)(se,t);var l={user:r,login:function(){return i.apply(this,arguments)},logout:function(){return u.apply(this,arguments)}};return Object(d.jsx)(N.Provider,{value:l,children:e.children})},je=n.p+"static/media/pizza-background.d7d5ac28.jpg";var be=function(){var e=Object(o.useState)(!1),t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(d.jsx)(me,{children:Object(d.jsxs)(ne,{children:[n&&Object(d.jsx)(g,{onHideCart:function(){a(!1)}}),Object(d.jsx)(M,{onShowCart:function(){a(!0)}}),Object(d.jsx)(D,{}),Object(d.jsx)("img",{className:"backgroundImage",src:je,alt:"Pizza"}),Object(d.jsx)(Y,{})]})})};r.a.render(Object(d.jsx)(be,{}),document.getElementById("root"))}],[[48,1,2]]]);
//# sourceMappingURL=main.119acee3.chunk.js.map